# Nexus-Scanner API Environment Configuration
# Copy this file to .env and update the values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=postgresql://nexus_user:your_password@localhost:5432/nexus_scanner
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=your_redis_password
REDIS_MAX_CONNECTIONS=50
REDIS_RETRY_ON_TIMEOUT=true

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production-min-32-chars
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440
JWT_REFRESH_EXPIRE_DAYS=30

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_DEBUG=false
API_RELOAD=false
API_ACCESS_LOG=true

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,https://yourdomain.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=*

# Rate Limiting
RATE_LIMIT_REQUESTS=60
RATE_LIMIT_WINDOW=60
RATE_LIMIT_STORAGE=redis

# API Keys
API_KEY_HEADER=X-API-Key
ADMIN_API_KEY=your-admin-api-key-change-in-production

# =============================================================================
# CELERY CONFIGURATION (Background Tasks)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3300
CELERY_WORKER_CONCURRENCY=4

# =============================================================================
# SCANNING CONFIGURATION
# =============================================================================
MAX_CONCURRENT_SCANS=5
SCAN_TIMEOUT=3600
SCAN_RETRY_ATTEMPTS=3
SCAN_RETRY_DELAY=60

# Network scanning
NETWORK_TIMEOUT=30
NETWORK_MAX_THREADS=50
NETWORK_CONNECT_TIMEOUT=10

# Web scanning
WEB_USER_AGENT=Nexus-Scanner/1.0
WEB_MAX_REDIRECTS=10
WEB_TIMEOUT=30
WEB_MAX_PAGES=1000

# =============================================================================
# REPORT CONFIGURATION
# =============================================================================
REPORTS_DIR=./reports
REPORTS_MAX_SIZE=104857600
REPORTS_RETENTION_DAYS=90
REPORTS_CLEANUP_INTERVAL=24

# PDF Reports
PDF_FONT_SIZE=12
PDF_PAGE_SIZE=A4
PDF_MARGINS=72

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
UPLOADS_DIR=./uploads
UPLOADS_MAX_SIZE=52428800
UPLOADS_ALLOWED_EXTENSIONS=txt,csv,json,xml
UPLOADS_RETENTION_DAYS=30

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=./logs/nexus-api.log
LOG_MAX_SIZE=10485760
LOG_BACKUP_COUNT=5
LOG_ROTATION=midnight

# Database logging
LOG_DATABASE_QUERIES=false
LOG_SLOW_QUERIES=true
SLOW_QUERY_THRESHOLD=1.0

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
SMTP_USE_SSL=false

# Email settings
EMAIL_FROM=noreply@nexus-scanner.com
EMAIL_FROM_NAME=Nexus-Scanner
EMAIL_TEMPLATES_DIR=./templates/email

# =============================================================================
# MONITORING & METRICS
# =============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health check
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# VirusTotal API (Optional)
VIRUSTOTAL_API_KEY=your-virustotal-api-key
VIRUSTOTAL_RATE_LIMIT=4

# Shodan API (Optional)
SHODAN_API_KEY=your-shodan-api-key

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
DEVELOPMENT_MODE=false
DEBUG_TOOLBAR=false
PROFILING_ENABLED=false

# Test database
TEST_DATABASE_URL=postgresql://nexus_user:your_password@localhost:5432/nexus_scanner_test

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================
PRODUCTION_MODE=true
SSL_REQUIRED=true
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=nexus-scanner-backups
BACKUP_S3_REGION=us-east-1

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=false
FEATURE_TWO_FACTOR_AUTH=false
FEATURE_API_RATE_LIMITING=true
FEATURE_SCAN_SCHEDULING=true
FEATURE_REPORT_SHARING=true
FEATURE_WEBHOOK_NOTIFICATIONS=false

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=nexus:
CACHE_VERSION=1

# Cache timeouts (seconds)
CACHE_USER_TIMEOUT=1800
CACHE_TARGET_TIMEOUT=3600
CACHE_SCAN_TIMEOUT=300
CACHE_REPORT_TIMEOUT=7200
CACHE_STATS_TIMEOUT=600

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================
WEBHOOK_TIMEOUT=30
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=60
WEBHOOK_MAX_PAYLOAD_SIZE=1048576

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=./logs/audit.log
AUDIT_LOG_RETENTION_DAYS=365

# GDPR Compliance
GDPR_ENABLED=true
DATA_RETENTION_DAYS=730
DATA_EXPORT_FORMAT=json

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# Database connection pool
DB_POOL_PRE_PING=true
DB_POOL_RECYCLE=3600
DB_ECHO=false

# HTTP client settings
HTTP_POOL_CONNECTIONS=100
HTTP_POOL_MAXSIZE=100
HTTP_MAX_RETRIES=3

# Memory limits
MAX_MEMORY_USAGE=2147483648
GC_THRESHOLD=0.8

# =============================================================================
# LOCALIZATION
# =============================================================================
DEFAULT_LANGUAGE=tr
SUPPORTED_LANGUAGES=tr,en
TIMEZONE=Europe/Istanbul
DATE_FORMAT=%d.%m.%Y
TIME_FORMAT=%H:%M:%S